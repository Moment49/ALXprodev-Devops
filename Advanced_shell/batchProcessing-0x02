#!/bin/bash
# Define the list as a string with square brackets
pokemon_list='["bulbasaur", "ivysaur", "venusaur", "charmander", "charmeleon"]'

# Remove the brackets and quotes, then convert commas to spaces
pokemon_list_clean=$(echo "$pokemon_list" | sed 's/[][]//g' | sed 's/"//g' | sed 's/,/ /g')

# Loop through each Pok√©mon
for pokemon in $pokemon_list_clean; do
  # Convert to lowercase for the API and filename
  pname=$(echo "$pokemon" | tr '[:upper:]' '[:lower:]')
  
  echo "Fetching data for $pokemon..."
  
  # Fetch data from the API and save to <pokemon>.json
  curl -s "https://pokeapi.co/api/v2/pokemon/$pname" -o "$pname.json"
  
  # Check if the request succeeded
  if [[ $? -eq 0 ]]; then
    echo "Saved $pname.json"
  else
    echo "Failed to fetch data for $pokemon"
  fi
  
  # Delay 2 seconds to avoid rate-limiting
  sleep 2
done

echo "All done!"
